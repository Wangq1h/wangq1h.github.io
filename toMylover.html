<!DOCTYPE html>
<html>
<head>
    <title>新年快乐！</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
        #message {
            position: absolute;
            top: 20px;
            width: 100%;
            text-align: center;
            color: #FFD700;
            font-family: 'Microsoft YaHei', sans-serif;
            font-size: 3em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            z-index: 100;
        }
    </style>
</head>
<body>
    <div id="message">❤️ 新年快乐 ❤️</div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // 初始化场景
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // 添加灯光
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);
        const pointLight = new THREE.PointLight(0xff3300, 1);
        pointLight.position.set(0, 0, 5);
        scene.add(pointLight);

        // 创建灯笼主体
        function createLantern() {
            const group = new THREE.Group();

            // 灯笼主体
            const geometry = new THREE.CylinderGeometry(3, 3, 6, 32);
            const material = new THREE.MeshPhongMaterial({
                color: 0xff0000,
                shininess: 100
            });
            const cylinder = new THREE.Mesh(geometry, material);
            group.add(cylinder);

            // 顶部/底部金环
            const ringGeometry = new THREE.TorusGeometry(3.1, 0.2, 16, 100);
            const ringMaterial = new THREE.MeshStandardMaterial({ color: 0xFFD700 });
            
            const topRing = new THREE.Mesh(ringGeometry, ringMaterial);
            topRing.position.y = 3;
            group.add(topRing);

            const bottomRing = new THREE.Mesh(ringGeometry, ringMaterial);
            bottomRing.position.y = -3;
            group.add(bottomRing);

            // 添加穗子
            const tasselGeometry = new THREE.CylinderGeometry(0.05, 0.05, 2);
            for(let i=0; i<12; i++){
                const tassel = new THREE.Mesh(tasselGeometry, ringMaterial);
                const angle = (Math.PI*2/12)*i;
                tassel.position.set(3.1*Math.cos(angle), -4, 3.1*Math.sin(angle));
                tassel.rotation.z = Math.PI/2;
                group.add(tassel);
            }

            return group;
        }

        // 烟花系统
        class FireworkSystem {
            constructor() {
                this.particles = [];
                this.geometry = new THREE.SphereGeometry(0.1);
            }

            createFirework() {
                const origin = new THREE.Vector3(
                    Math.random()*10-5,
                    Math.random()*5+5,
                    Math.random()*10-5
                );
                
                for(let i=0; i<100; i++){
                    const material = new THREE.MeshBasicMaterial({
                        color: new THREE.Color(Math.random(), Math.random(), Math.random())
                    });
                    const particle = new THREE.Mesh(this.geometry, material);
                    particle.position.copy(origin);
                    particle.velocity = new THREE.Vector3(
                        Math.random()-0.5,
                        Math.random()-0.5,
                        Math.random()-0.5
                    ).multiplyScalar(0.5);
                    scene.add(particle);
                    this.particles.push(particle);
                }
            }

            update() {
                this.particles.forEach((p, index) => {
                    p.position.add(p.velocity);
                    p.velocity.y -= 0.01;
                    p.material.opacity *= 0.97;
                    if(p.material.opacity < 0.1) {
                        scene.remove(p);
                        this.particles.splice(index, 1);
                    }
                });
            }
        }

        // 初始化对象
        const lantern = createLantern();
        scene.add(lantern);
        const fireworks = new FireworkSystem();
        
        camera.position.z = 15;

        // 动画循环
        function animate() {
            requestAnimationFrame(animate);

            // 旋转灯笼
            lantern.rotation.y += 0.01;

            // 随机生成烟花
            if(Math.random() < 0.05) fireworks.createFirework();
            fireworks.update();

            renderer.render(scene, camera);
        }

        // 响应式适配
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        animate();
    </script>
</body>
</html>